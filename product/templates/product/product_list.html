{% extends 'base.html' %}
{% block title %}
    {% if request.resolver_match.url_name == "popular_products" %}
        همه محصولات
    {% else %}
         دسته‌بندی {{ category.name }}
    {% endif %}
{% endblock %}
{% load static %}

{% block content %}
<body class="appFavorite2">

    <div class="app profile pb-90">
        <div class="title-header-bar fixed-top bg-white">
            <a href="/" class="back-btn"><i class="icon-right"></i></a>
            {% if request.resolver_match.url_name == "popular_products" %}
                <h1>همه محصولات</h1>
            {% else %}
                {% if products %}
                    <h1>دسته بندی {{ category.name }}</h1>
                {% else %}
                    <h1>محصولی در این دسته بندی وجود ندارد</h1>
                {% endif %}
            {% endif %}
        </div>

        <div class="tf-container pt-80">
            <ul>
                    {% for product in products %}
                        <li class="tf-box-row style-2 mb-12">
                            <div class="img-box">
                                {% if request.user.is_admin %}
                                        <a href="{% url 'update_product' product.id %}" class="btn-edit top-left"><i class="bi bi-pencil"></i></a>
                                {% endif %}
                                <a href="{% url 'product_detail' product.category.name product.name %}">
                                    <img src="{{ product.product_photo.url }}" alt="{{ product.name }}">
                                </a>
                            </div>
                            <div class="content-box">
                                <h5><a href="{% url 'product_detail' product.category.name product.name %}">{{ product.name }}</a></h5>
                                <ul class="review">
                                    <li>{{ product.description }}</li>
                                </ul>
                                <span class="price">{{ product.price }} تومان</span>
                            </div>
                        </li>
                    {% endfor %}
            </ul>
        </div>
    </div>
{% endblock %}

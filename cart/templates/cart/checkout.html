{% extends "base.html" %}
{% block title %}پرداخت{% endblock %}
{% load static %}
{% block content %}
<div class="header">
    <div class="title-header-bar fixed-top bg-white">
        <a href="#" class="back-btn"><i class="icon-right"></i></a>
        <h1>پرداخت</h1>
    </div>
</div>
<div class="app pt-80">
    <div class="tf-container">
        <form action="{% url 'finalize_cart' %}" method="post">
            {% csrf_token %}
            <div class="title-bar st1">
                <h3>میز</h3>
            </div>
            <div class="list-view-card mt-17">
                <div class="img" style="width: 40px;height: 40px;">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#033f38" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M16.5 3.75V16.5L12 14.25 7.5 16.5V3.75m9 0H18A2.25 2.25 0 0 1 20.25 6v12A2.25 2.25 0 0 1 18 20.25H6A2.25 2.25 0 0 1 3.75 18V6A2.25 2.25 0 0 1 6 3.75h1.5m9 0h-9" />
                    </svg>
                </div>
                <div class="content">
                    <p style="margin-bottom: 10px">یک میز را از منوی زیر انتخاب کنید:</p>
                    {{order_form.table}}
                </div>
            </div>

            <h3 class="mt-25 fw-7">روش پرداخت</h3>
            <div class="list-view-card mt-12">
                <div class="img" style="width: 40px;height: 40px;">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#033f38" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z" />
                    </svg>
                </div>
                <div class="content">
                    <p style="margin-bottom: 10px">یک میز را از منوی زیر انتخاب کنید:</p>
                    {{order_form.payment_method}}
                </div>
            </div>

            <h3 class="mt-25 fw-7">شماره همراه</h3>
            <div class="list-view-card mt-12">
                <div class="img" style="width: 40px;height: 40px;">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#033f38" class="size-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z" />
                    </svg>                      
                </div>
                <div class="content">
                    <p style="margin-bottom: 10px">شماره تلفن خود را وارد کنید (اختیاری):</p>
                    {{order_form.phone_number}}
                </div>
            </div>

            <div class="box-total-order st1 pt-70">
                <ul>
                {% if cart_items %}
                    <li class="list-order">
                        <p class="mt-15 list-order-total mb-30">آیتم های سفارش:</p>
                    </li>
                    {% for item in cart_items %}
                        <li class="list-order">
                            {{ item.product.name }}<span>{{ item.product.price }} × {{ item.quantity }}</span>
                        </li>
                    {% endfor %}
                {% else %}
                    <li>محصولی وجود ندارد</li>
                {% endif %}
                    <li class="list-order line">
                    </li>    
                </ul>
                <p class="mt-15 list-order-total mb-30">
                    مجموع: <span>{{ cart.get_total_price }} تومان</span>
                </p>

                <div>
                    <button type="submit" class="tf-btn large primary mb-20" style="margin-bottom:100px;">ثبت سفارش</button>
                </div>
            </div>
    </div>
</div>
{% endblock %} 